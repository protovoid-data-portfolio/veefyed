flowchart TD
    A[Start] --> B[Load processed set from JSON, if exists]
    B --> C[Collect product URLs from category pages]
    C --> D[For each product URL, ThreadPoolExecutor]
    D --> E{Already processed?}
    E -- Yes --> F[Skip]
    E -- No --> G[Add to processed set]
    G --> H[Fetch product page HTML]
    H --> I[Parse product details]
    I --> I1[Product Name]
    I --> I2[Brand]
    I --> I3[Category]
    I --> I4[SKU]
    I --> I5[EAN]
    I --> I6[Capacity / Size]
    I --> I7[Ingredients]
    I --> I8[Product Image URL]
    H --> J[Download product image]
    J --> K[Store product data in results list]
    K --> L{Periodic save?}
    L -- Yes --> M[Save processed set to JSON]
    L -- No --> N[Continue scraping]
    N --> D
    F --> D
    D --> O{All products processed or interrupted?}
    O -- No --> D
    O -- Yes --> P[Save final results to CSV]
    P --> Q[Exit gracefully]

Notes:
- Parallel scraping is represented in the loop at D
- Thread-safe checks happen at the decision node E
- Periodic saves are handled at L
- Graceful exit is at the end Q
